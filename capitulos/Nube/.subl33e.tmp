\myChapter{Desarrollo Web y Móvil}\label{chap:web}
%\begin{flushright}{\slshape
%    Call me Ishmael.} \\ \medskip
%    --- {Herman Melville, Moby-Dick; or, The Whale}
%\end{flushright}
\vfill
\minitoc\mtcskip
\clearpage

En los anteriores capítulos hemos mostrado el sistema de subida de datos a la Nube Goolge Fusion Tables así como la API REST que nos permite acceder a los datos desde aplicaciones de terceros. Adicionalmente a esta API, se han desarrollado varios servicios Web que permite la creación de mecanismos avanzados para la cración de tablas, gráficos y mapas embebidos.

Sobre estos servicios se ha desarrollado varias plataformas web que permite la difusión de los datos: una página principal de información general sobre el proyecto, un panel de visualización de los datos, un visor de eventos. Adicionalmente se presenta el panel de administración de los datos de Google Fusion Tables, que permite la gestión de los datos y su autoría.

Por último, se presenta la aplicación móvil desarrollada en Android usando tecnología HTML. 

\section{Servicios Web} 

Si bien disponemos de una API REST para el acceso y manipulación de los datos alojado en la nube, se ha desarrollado una capa de Servicios Web que hace uso de dicha API para crear elementos de representanción de datos. Al hacerlo mediante una capa externa, en lugar de gestionarlo en la propia aplicación, se consigue un entorno uniforme y modular. Una actualización en un servicio web, implica que todas las demás plataformas y servicios que hacen uso de dicho servicio tengan al instante la mejora o nueva funcionalidad.

Además, se consigue consolidar una imagen y mecánicas de uso comunes a todos las plataformas de forma fácil y sencilla.

A continuación, se presentan los 3 tipos de visualización básicos empleados, mostrando para cada uno algunos ejemplos de código así como capturas de pantalla y explicaciones de la funcionalidad.

\subsection{Tablas}

La forma más básica de representar información es mediante una estructura tabular. Se provee de un servicio web básico capaz de procesar una consulta SQL en una tabla HTMl. Parte del código de dicho servicio se puede encontrar en la Figura \ref{fig:ejemploUsoFusionTables-Tabla}.

Se ha creado una capa Javascript por encima de la tabla HTML para dotarle de funcionalidad adicional no nativa, como la posibilidad de aplicar filtros, búsqueda y ordenación por columnas

\begin{SCfigure}[20][tb]
\centering
\includegraphics[width=26pc]{img/web/sw-tabla.png}
\caption{Representación en modo de tabla de los datos}
\end{SCfigure}

Se hace necesario destacar que la petición de información y procesamiento de la tabla es realizado en el lado del cliente, al estar realizada enteramente en Javascript.

\subsection{Gráficos}

Si bien una tabla puede servir para el análisis de los datos, estos adquieren mayor vistosidad en un gráfico. Debido a la facilidad de integración de Google Fusion Tables con Google Chart, es posible realizar gráficos de forma rápida y muy vistosa.

Se proveen dos tipos de gráficos de ejemplo, uno basado en tecnología CANVAS y otro basado en tecnología FLASH a modo de ejemplo.

\subsubsection{Histórico: serie temporal}

Este tipo de gráfico permite mostrar una serie temporal de forma interactiva, donde el usuario puede seleccionar. Consta de dos zonas, la inferior muestra toda la serie así como una ventana temporal, que permite hacer zoom en la zona principal en la serie.

\begin{SCfigure}[20][tb]
\centering
\includegraphics[width=26pc]{img/web/sw-grafico1.png}
\caption{Gráfico de serie temporal}
\end{SCfigure}

\subsubsection{Gráfico interativo}

Este tipo de gráfico sirven para contrastar la información de distintas columnas de la tabla, así como ofrecer animaciones de las vistas de los datos que pueden reproducirse (como una película) para mostrar la evolución a lo largo del tiempo.

Se puede elegir la columna representada por cada eje de la gráfica (indicando además si sigue un comportamiento lineal o logarítmico). Se pueden configurar los colores y tamaños de las representaciones para que sean automáticos, distinto para cada ``tupla'' o bien se correspondan con una escala de color basada en alguna columna.

Se disponen de tres gráficos a seleccionar: gráfico de dispersión XY, gráfico de barras y serie temporal. Las configuraciones realizadas en cada entorno son compartidas, lo que que permite cambiar entre un tipo de visualización a otro de forma inmediata.

Sin embargo, este tipo de gráfica está limitada a entornos de escritorio con soporte a tecnología FLASH, por lo que no es soportado por dispositivos móviles.

\begin{SCfigure}[20][tb]
\centering
\includegraphics[width=20pc]{img/web/sw-anima1.png}
\includegraphics[width=20pc]{img/web/sw-anima2.png}
\includegraphics[width=20pc]{img/web/sw-anima3.png}
\includegraphics[width=20pc]{img/web/sw-anima4.png}
\caption{Animación de la gráfica interativa}
\end{SCfigure}

\subsection{Mapas}

Este mapa permite navegar entre las fechas y horas 

Ya hemos visto con anterioridad lo fácil que resulta integrar un mapa en Google Maps con una fuente de datos basada en Google Fusion Tables.

Se monta un entorno basado en Google Maps en el que se añade funcionalidad extra para la visualización y manipulación de los datos:

\begin{SCfigure}[20][tb]
\centering
\includegraphics[width=20pc]{img/web/sw-mapa.png}
\caption{Mapa principal de visualización de los datos}
\end{SCfigure}

Sobre dicho mapa se distinguen 4 zonas, que permiten manipular y navegar por los datos a visualizar:

\begin{SCfigure}[20][tb]
\centering
\includegraphics[width=20pc]{img/web/sw-mapa2.png}
\caption{Mapa principal de visualización de los datos: Zonas de control}
\end{SCfigure}

\subsubsection{A: Zona de selección de fecha}

Permite ajustar la fecha para la visualización de los datos. Por defecto muestra la fecha actual.

\begin{SCfigure}[20][tb]
\centering
\includegraphics[width=16pc]{img/web/sw-mapa-fecha.png}
\caption{Mapa principal de visualización de los datos: Selección de fecha}
\end{SCfigure}

\subsubsection{B: Zona de Información Adicional}

Cuando un nodo es seleccionado, muestra la información relativa a dicho nodo, así como ofrece la posibilidad de mostrar los gráficos relativos a la serie temporal de dicho nodo.

\begin{SCfigure}[20][tb]
\centering
\includegraphics[width=20pc]{img/web/sw-mapa-nodo.png}
\caption{Mapa principal de visualización de los datos: Información del nodo}
\end{SCfigure}

\subsubsection{C: Leyenda de colores}

Muestra la equivalencia en dispositivos detectados de la escala de colores empleada en la visualización de los datos.

\subsubsection{D: Selector de hora}

El selector de hora permite elegir la hora de la visualización de los datos.

\begin{SCfigure}[20][tb]
\centering
\includegraphics[width=20pc]{img/web/sw-mapa-hora.png}
\caption{Mapa principal de visualización de los datos: Información del nodo}
\end{SCfigure}


\subsection{}

\section{Plataformas Web}

\subsection{Página principal: Wordpress}

\subsection{Visor de eventos online}

\subsection{Panel de control}

\subsection{Panel de Administración de Google Fusion Table}

\section{Aplicación Móvil}

\subsection{Optimizaciones}


\vfill
\cleardoublepage
